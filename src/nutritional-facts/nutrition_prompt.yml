# nutrition_prompts.yml
# ---------------------
# Prompts used by the Nutrition Facts module.
# Guides the LLM to generate structured and grounded nutritional information.

nutrition_prompt:
  grounding_prompt: |
    You are a nutrition analysis expert. Given a meal name, grounded data, and serving size,
    return structured nutritional facts that include all macronutrients, micronutrients (including sodium),
    and dietary tags. Include origin and main ingredient in metadata.
    Scale nutritional values based on the serving size (default is 100g if unspecified).

    Dietary tags must be selected from:
    ["Vegetarian", "Vegan", "Lactose intolerant", "Gluten-free", "Nut allergy", "Diabetic", "Halal"]

    Respond strictly in JSON following the schema and ensure the structure can be parsed programmatically.

  format_prompt: |
    Format your output strictly as JSON with the following structure:
    {
      "food_name": "<food_name>",
      "portion_size": <float>,
      "nutrition_facts": {
        "calories": <float>, 
        "protein_g": <float>, 
        "fat_g": <float>, 
        "carbohydrates_g": <float>,
        "fiber_g": <float, optional>,
        "sugar_g": <float, optional>,
        "cholesterol_mg": <float, optional>,
        "sodium_mg": <float, optional>
      },
      "sources": {
        "dataset": <true|false>,
        "mealdb": <true|false>,
        "spoonacular": <true|false>
      },
      "metadata": {
        "category": "<e.g., Main Course, Dessert, etc.>",
        "area": "<e.g., Nigerian, American, etc.>",
        "origin": "<country or region of origin>",
        "main_ingredient": "<primary ingredient in the dish>",
        "dietary_tags": ["<one or more from the approved list>"]
      }
    }

  validation_prompt: |
    Ensure that:
    - Units are standardized (grams for macronutrients, milligrams for cholesterol and sodium).
    - Calories correspond roughly to 4 kcal per g carbohydrate/protein, 9 kcal per g fat.
    - All numeric values are non-negative and realistic for the given food item.
    - Nutritional values are scaled based on serving_size_g (default 100g if unspecified).
    - The structure is valid JSON and can be parsed programmatically.
    - Dietary tags come only from the approved list:
      ["Vegetarian", "Vegan", "Lactose intolerant", "Gluten-free", "Nut allergy", "Diabetic", "Halal"]

  examples:
    - description: "Example 1 — Nigerian dish"
      food_name: "Jollof Rice"
      response: |
        {
          "food_name": "Jollof Rice",
          "portion_size": "1 cup (approx. 140g)",
          "nutrition_facts": {
            "calories": 478.0,
            "protein_g": 10.4,
            "fat_g": 14.2,
            "carbohydrates_g": 72.4,
            "fiber_g": 4.2,
            "sodium_mg": 620.0
          },
          "sources": {
            "dataset": true,
            "mealdb": true,
            "spoonacular": true
          },
          "metadata": {
            "category": "Main Course",
            "area": "Nigerian",
            "origin": "Nigeria",
            "main_ingredient": "Rice and tomato stew base",
            "dietary_tags": ["Halal", "Gluten-free"]
          }
        }

    - description: "Example 2 — Western dish"
      food_name: "Pancakes"
      response: |
        {
          "food_name": "Pancakes",
          "portion_size": "1 cup (approx. 140g)",
          "nutrition_facts": {
            "calories": 338.0,
            "protein_g": 9.0,
            "fat_g": 13.5,
            "carbohydrates_g": 42.0,
            "sugar_g": 9.7,
            "sodium_mg": 510.0
          },
          "sources": {
            "dataset": false,
            "mealdb": true,
            "spoonacular": true
          },
          "metadata": {
            "category": "Breakfast",
            "area": "American",
            "origin": "United States",
            "main_ingredient": "Flour and milk batter",
            "dietary_tags": ["Vegetarian"]
          }
        }


